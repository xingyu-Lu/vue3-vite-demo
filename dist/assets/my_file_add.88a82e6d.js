var w=Object.defineProperty,A=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var F=(t,e,a)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,y=(t,e)=>{for(var a in e||(e={}))S.call(e,a)&&F(t,a,e[a]);if(v)for(var a of v(e))z.call(e,a)&&F(t,a,e[a]);return t},k=(t,e)=>A(t,B(e));import"./wangEditor.52e7c8e8.js";import{a as C}from"./axios.21c32c09.js";import{ac as E,ap as L,r as p,ak as N,u as V,a as q,t as I,c as r,d as U,ad as D,f as o,w as l,ae as G,aj as b,h as R,i as _}from"./vendor.a4976bbd.js";import{_ as M,l as O,d as P}from"./index.5ee197f9.js";const T={name:"news_add",components:{Plus:E,Delete:L},setup(){const t=p(null),e=p(null);p(null),p(null);const a=N(),c=V(),{id:x}=a.query,s=q({token:"Bearer "+O("token")||"",id:x,Form:{attachment:"",attachmentFileList:[]},rules:{attachment:[{required:!0,message:"\u6587\u4EF6\u5FC5\u987B",trigger:["change"]}]}}),f=()=>{e.value.validate(n=>{if(n){let m=C.post,d={attachment:s.Form.attachment};m("/api/head/staffs/updload_file",d).then(()=>{b.success("\u6DFB\u52A0\u6210\u529F"),c.push({path:"/employee-my-file"})})}})},h=n=>{b.success("\u4E0A\u4F20\u6210\u529F"),s.Form.attachment?s.Form.attachment=s.Form.attachment+","+n.data.id:s.Form.attachment=n.data.id},u=n=>{t.value.clearFiles(),s.Form.attachment="",s.Form.attachmentFileList=[]},g=n=>{let m=n.name.split("."),d=m.length;const i=m[d-1]||"";if(!["jpg","jpeg","png","gif","doc","docx","xlsx","xls","pdf","zip","rar","mp4"].includes(i))return b.error("\u4E0D\u80FD\u4E0A\u4F20"+i+"\u683C\u5F0F\u7684\u6587\u4EF6"),!1};return k(y({},I(s)),{Ref:e,attachmentRef:t,submitAdd:f,uploadImgServer:P,handleAttachmentSuccess:h,handleAttachmentRemove:u,handleBeforeUpload:g})}},H=R("div",{style:{float:"right",height:"150px","align-items":"center",display:"flex","font-size":"36px","letter-spacing":"0.2em",color:"#fff"}},[R("strong",null,"\u6211\u7684\u6587\u7AE0")],-1),J=_("\u5B9C\u5BBE\u5E02\u7B2C\u4E09\u4EBA\u6C11\u533B\u9662"),K=_("\u6211\u7684\u6587\u7AE0"),Q=_("\u4E0A\u4F20"),W=_("\u7ACB\u5373\u521B\u5EFA");function X(t,e,a,c,x,s){const f=r("el-col"),h=r("el-row"),u=r("el-breadcrumb-item"),g=r("el-breadcrumb"),n=r("el-button"),m=r("el-upload"),d=r("el-form-item"),i=r("el-form"),j=r("el-card");return U(),D(G,null,[o(h,{justify:"center",align:"middle",style:{background:"linear-gradient(135deg, rgb(36 205 103 / 95%) 0%, rgb(56 150 226 / 95%) 100% )","margin-bottom":"20px","margin-top":"-10px"}},{default:l(()=>[o(f,{span:24},{default:l(()=>[H]),_:1})]),_:1}),o(g,{separator:"/",style:{"margin-bottom":"20px"}},{default:l(()=>[o(u,{to:{path:"/"}},{default:l(()=>[J]),_:1}),o(u,null,{default:l(()=>[K]),_:1})]),_:1}),o(j,{style:{"min-height":"100%"}},{default:l(()=>[o(i,{model:t.Form,rules:t.rules,ref:"Ref","label-width":"100px"},{default:l(()=>[o(d,{label:"\u9644\u4EF6",prop:"attachment"},{default:l(()=>[o(m,{ref:"attachmentRef",headers:{Authorization:t.token},action:c.uploadImgServer,"before-upload":c.handleBeforeUpload,"on-remove":c.handleAttachmentRemove,"on-success":c.handleAttachmentSuccess,"auto-upload":!0,data:{basket:"attachment"},limit:3,multiple:"","file-list":t.Form.attachmentFileList},{default:l(()=>[o(n,{type:"primary"},{default:l(()=>[Q]),_:1})]),_:1},8,["headers","action","before-upload","on-remove","on-success","file-list"])]),_:1}),o(d,null,{default:l(()=>[o(n,{type:"primary",onClick:e[0]||(e[0]=Y=>c.submitAdd())},{default:l(()=>[W]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)}var oe=M(T,[["render",X]]);export{oe as default};
