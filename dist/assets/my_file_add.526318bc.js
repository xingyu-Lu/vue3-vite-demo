var A=Object.defineProperty,j=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var v=(t,e,a)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,F=(t,e)=>{for(var a in e||(e={}))S.call(e,a)&&v(t,a,e[a]);if(g)for(var a of g(e))C.call(e,a)&&v(t,a,e[a]);return t},y=(t,e)=>j(t,B(e));import"./wangEditor.9b6a0ebb.js";import{a as E}from"./axios.5970783a.js";import{ac as L,ap as N,r as d,ak as V,u as q,a as z,t as I,c as l,d as D,ad as G,f as o,w as n,ae as M,aj as x,h as k,i as u}from"./vendor.954c4224.js";import{_ as O,l as P,d as T}from"./index.85678b9f.js";const $={name:"news_add",components:{Plus:L,Delete:N},setup(){const t=d(null),e=d(null);d(null),d(null);const a=V(),c=q(),{id:b}=a.query,s=z({token:"Bearer "+P("token")||"",id:b,Form:{attachment:"",attachmentFileList:[]},rules:{attachment:[{required:!0,message:"\u6587\u4EF6\u5FC5\u987B",trigger:["change"]}]}}),_=()=>{e.value.validate(r=>{if(r){let i=E.post,f={attachment:s.Form.attachment};i("/api/head/staffs/updload_file",f).then(()=>{x.success("\u6DFB\u52A0\u6210\u529F"),c.push({path:"/employee-my-file"})})}})},p=r=>{x.success("\u4E0A\u4F20\u6210\u529F"),s.Form.attachment?s.Form.attachment=s.Form.attachment+","+r.data.id:s.Form.attachment=r.data.id},m=r=>{t.value.clearFiles(),s.Form.attachment="",s.Form.attachmentFileList=[]};return y(F({},I(s)),{Ref:e,attachmentRef:t,submitAdd:_,uploadImgServer:T,handleAttachmentSuccess:p,handleAttachmentRemove:m})}},H=k("div",{style:{float:"right",height:"150px","align-items":"center",display:"flex","font-size":"36px","letter-spacing":"0.2em",color:"#fff"}},[k("strong",null,"\u6211\u7684\u6587\u7AE0")],-1),J=u("\u5B9C\u5BBE\u5E02\u7B2C\u4E09\u4EBA\u6C11\u533B\u9662"),K=u("\u6211\u7684\u6587\u7AE0"),Q=u("\u4E0A\u4F20"),U=u("\u7ACB\u5373\u521B\u5EFA");function W(t,e,a,c,b,s){const _=l("el-col"),p=l("el-row"),m=l("el-breadcrumb-item"),r=l("el-breadcrumb"),i=l("el-button"),f=l("el-upload"),h=l("el-form-item"),R=l("el-form"),w=l("el-card");return D(),G(M,null,[o(p,{justify:"center",align:"middle",style:{background:"linear-gradient(135deg, rgb(36 205 103 / 95%) 0%, rgb(56 150 226 / 95%) 100% )","margin-bottom":"20px","margin-top":"-10px"}},{default:n(()=>[o(_,{span:24},{default:n(()=>[H]),_:1})]),_:1}),o(r,{separator:"/",style:{"margin-bottom":"20px"}},{default:n(()=>[o(m,{to:{path:"/"}},{default:n(()=>[J]),_:1}),o(m,null,{default:n(()=>[K]),_:1})]),_:1}),o(w,{style:{"min-height":"100%"}},{default:n(()=>[o(R,{model:t.Form,rules:t.rules,ref:"Ref","label-width":"100px"},{default:n(()=>[o(h,{label:"\u9644\u4EF6",prop:"attachment"},{default:n(()=>[o(f,{ref:"attachmentRef",headers:{Authorization:t.token},action:c.uploadImgServer,"on-remove":c.handleAttachmentRemove,"on-success":c.handleAttachmentSuccess,"auto-upload":!0,data:{basket:"attachment"},limit:3,multiple:"","file-list":t.Form.attachmentFileList},{default:n(()=>[o(i,{type:"primary"},{default:n(()=>[Q]),_:1})]),_:1},8,["headers","action","on-remove","on-success","file-list"])]),_:1}),o(h,null,{default:n(()=>[o(i,{type:"primary",onClick:e[0]||(e[0]=X=>c.submitAdd())},{default:n(()=>[U]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)}var oe=O($,[["render",W]]);export{oe as default};
